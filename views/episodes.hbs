<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <style>
      * {
        box-sizing: border-box;
        tap-highlight-color: transparent;
      }
      body {
        font-family: system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
        margin: 0;
        padding: 15px;
        line-height: 1.5;
        font-size: 16px;
        color: #333;
        -webkit-text-size-adjust: 100%;
      }
      h1 {
        font-size: 20px;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid #e0e0e0;
      }
      ul {
        list-style: none;
        padding: 0;
        margin: 0;
      }
      li {
        background: #f9f9f9;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        margin-bottom: 10px;
        padding: 12px;
      }
      a {
        text-decoration: none;
        color: #0066cc;
        transition: color 0.2s;
      }
      li > a:first-child {
        display: block;
        font-weight: bold;
        font-size: 17px;
        margin-bottom: 5px;
      }
      li > a:not(:first-child) {
        color: #666;
        font-size: 14px;
        display: inline-block;
        margin-right: 10px;
      }
      a:hover, a:active {
        color: #004080;
      }
    </style>
  </head>
  <body>


    <a href="/">Return to podcast list</a>
<h1>Include in core set:</h1>
    <select id="coreSetChoice">
        <option value="false" {{#if (eq meta.coreset "false")}}selected{{/if}}>Not Included</option>
        <option value="true" {{#if (eq meta.coreset "true")}}selected{{/if}}>Included</option>
    </select>
    <h1>Choose an episode of {{pod}}</h1>
    <ul>
    {{#each eps}}
        <div><li><a href="/play/{{../pod}}/{{encoded}}">   {{#if finished}}
                    âœ…
                {{else}}
                    ðŸ”´
                {{/if}}
        {{displayname}} [{{info.itunes_duration}}] </a> 
                </div>
        </li>
    {{/each}}
    </ul>


    <script>
    document.addEventListener("DOMContentLoaded", function () {

        const coreSetChoice = document.getElementById("coreSetChoice");

        coreSetChoice.addEventListener("change", function () {
            const selectedValue = coreSetChoice.value;

            fetch("/update-meta-pod", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({name: "{{pod}}", order: "{{meta.order}}", show: "{{meta.show}}", coreset: selectedValue })
            })
                .then(response => response.json())
                .then(data => {
                    if (!data.success) {
                        alert(`Error: ${data.message}`);
                    } else {
                        console.log(`Core set choice updated to: ${selectedValue}`);
                        // location.reload(); // Reload the page to reflect changes
                    }
                })
                .catch(error => console.error("Fetch error:", error));
        });
    })


</script>

  </body>
</html>
